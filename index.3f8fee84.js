!function(){var t={};function e(t,e,n){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return n}function n(t,e){!function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}}Object.defineProperty(t,"Game",{get:function(){return d},set:void 0,enumerable:!0,configurable:!0});var a=new WeakSet,s=new WeakSet,o=new WeakSet,l=new WeakSet,u=new WeakSet,c=new WeakSet,h=new WeakSet,f=new WeakSet,d=function(){var t;function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),n(this,a),n(this,s),n(this,o),n(this,l),n(this,u),n(this,c),n(this,h),n(this,f),this.initialState=t,this.size=4,this.status="idle",this.gameField=this.initialState,this.score=0}return t=[{key:"start",value:function(){this.status="playing",e(this,a,m).call(this),e(this,a,m).call(this)}},{key:"restart",value:function(){this.status="idle",this.score=0,this.gameField=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}},{key:"getStatus",value:function(){return this.status}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.gameField}},{key:"moveLeft",value:function(){var t=this;if("playing"===this.status){var n=this.gameField.map(function(n){return e(t,o,y).call(t,n)});e(this,f,w).call(this,n)}}},{key:"moveRight",value:function(){var t=this;if("playing"===this.status){var n=this.gameField.map(function(n){var r=n.slice().reverse();return e(t,o,y).call(t,r).reverse()});e(this,f,w).call(this,n)}}},{key:"moveUp",value:function(){var t=this;if("playing"===this.status){var n=e(this,l,g).call(this,this.gameField).map(function(n){return e(t,o,y).call(t,n)});e(this,f,w).call(this,e(this,l,g).call(this,n))}}},{key:"moveDown",value:function(){var t=this;if("playing"===this.status){var n=e(this,l,g).call(this,this.gameField).map(function(n){var r=n.slice().reverse();return e(t,o,y).call(t,r).reverse()});e(this,f,w).call(this,e(this,l,g).call(this,n))}}}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(r.prototype,t),r}();function m(){var t,n=function(t){if(Array.isArray(t))return t}(t=e(this,s,v).call(this))||function(t,e){var n,r,i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a=[],s=!0,o=!1;try{for(i=i.call(t);!(s=(n=i.next()).done)&&(a.push(n.value),2!==a.length);s=!0);}catch(t){o=!0,r=t}finally{try{s||null==i.return||i.return()}finally{if(o)throw r}}return a}}(t,2)||i(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],a=n[1];this.gameField[r][a]=.8>Math.random()?2:4}function v(){var t=[];return this.gameField.forEach(function(e,n){e.forEach(function(e,r){0===e&&t.push([n,r])})}),t[Math.floor(Math.random()*t.length)]}function y(t){for(var e,n=t.filter(function(t){return 0!==t}),a=[],s=0;s<n.length;)n[s]===n[s+1]?(a.push(2*n[s]),this.score+=2*n[s],s+=2):(a.push(n[s]),s+=1);return a.push.apply(a,function(t){if(Array.isArray(t))return r(t)}(e=Array(4-a.length).fill(0))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||i(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a}function g(t){return t[0].map(function(e,n){return t.map(function(t){return t[n]})})}function p(t){return JSON.stringify(this.gameField)!==JSON.stringify(t)}function S(){this.status=this.gameField.some(function(t){return t.includes(2048)})?"win":this.status}function b(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.gameField[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=function(){var t=r.value;if(t.some(function(t){return 0===t}))return{v:!1};for(var e=0;e<t.length;e++)if(t[e]===t[e+1])return{v:!1}}();if("object"==(a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a))return a.v}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}for(var s=0;s<4;s++)for(var o=[this.gameField[0][s],this.gameField[1][s],this.gameField[2][s],this.gameField[3][s]],l=0;l<o.length;l++)if(o[l]===o[l+1])return!1;return!0}function w(t){e(this,u,p).call(this,t)&&(this.gameField=t,e(this,a,m).call(this),e(this,c,S).call(this),e(this,h,b).call(this)&&(this.status="lose"))}var k=new(t=d),F=document.querySelector("button"),A=document.querySelector(".message-start"),x=document.querySelector(".message-win"),L=document.querySelector(".message-lose"),E=document.querySelector(".game-score"),j=document.querySelectorAll(".field-row");function C(){for(var t=function(t){for(var n=0;n<4;n++)!function(n){var r=j[t].children[n],i=e[t][n];0===i?(r.textContent="",r.className="field-cell"):(r.textContent=i,r.className="field-cell field-cell--".concat(i),r.style.top="0px",r.style.left="0px"),setTimeout(function(){r.style.top="100px",r.style.left="100px"},400)}(n)},e=k.getState(),n=0;n<4;n++)t(n);E.textContent=k.getScore()}F.addEventListener("click",function(t){t.preventDefault(),"idle"===k.getStatus()?(k.start(),C(),F.className="button restart",F.textContent="Restart",A.classList.add("hidden")):(k.restart(),F.className="button start",F.textContent="Start",A.classList.remove("hidden"),L.classList.add("hidden"),x.classList.add("hidden"),C())}),document.addEventListener("keydown",function(t){switch(t.preventDefault(),"win"===k.getStatus()&&x.classList.remove("hidden"),"lose"===k.getStatus()&&L.classList.remove("hidden"),t.key){case"ArrowDown":k.moveDown(),C();break;case"ArrowLeft":k.moveLeft(),C();break;case"ArrowRight":k.moveRight(),C();break;case"ArrowUp":k.moveUp(),C()}})}();
//# sourceMappingURL=index.3f8fee84.js.map
